import{a as N}from"./index-CmmzNXUp.js";import{B as _}from"./Button-DdUdn57M.js";import{d as z,k as B,r as s,b as c,o as u,e as t,f as l,g as m,l as S,u as a,i as o,t as d,F as j,j as w,N as x}from"./app-Bg6vI4SY.js";import{N as g}from"./Input-CsWorMrK.js";import{N as C}from"./Alert-CEfX4oUi.js";import{N as T}from"./Tag-DSpxfotg.js";const J=z({__name:"Token",setup(O){const r=B({phone:"",password:"",verify_code:""}),p=s(),f=s(),v=s(),y=s(),i=s();async function b(){v.value=!0;const e=await(await fetch(`${N()}/alist/wopan/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(v.value=!1,e.error){p.value=e.error;return}}async function V(){y.value=!0;const e=await(await fetch(`${N()}/alist/wopan/verify_code`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(y.value=!1,e.error){f.value=e.error;return}i.value=e}return(k,e)=>(u(),c(a(x),{size:"large",vertical:""},{default:t(()=>[l(a(g),{size:"large",placeholder:"Phone number",value:r.phone,"onUpdate:value":e[0]||(e[0]=n=>r.phone=n)},null,8,["value"]),l(a(g),{size:"large",placeholder:"Password",value:r.password,"onUpdate:value":e[1]||(e[1]=n=>r.password=n),type:"password"},null,8,["value"]),l(a(_),{type:"primary",secondary:"",size:"large",block:"",onClick:b,loading:v.value},{default:t(()=>e[3]||(e[3]=[o("Get Verify Code ")])),_:1,__:[3]},8,["loading"]),p.value?(u(),c(a(C),{key:0,title:"Error",type:"error"},{default:t(()=>[o(d(p.value),1)]),_:1})):m("v-if",!0),l(a(g),{size:"large",placeholder:"Verify code",value:r.verify_code,"onUpdate:value":e[2]||(e[2]=n=>r.verify_code=n)},null,8,["value"]),l(a(_),{type:"primary",size:"large",block:"",onClick:V,loading:y.value},{default:t(()=>e[4]||(e[4]=[o("Get Token")])),_:1,__:[4]},8,["loading"]),f.value?(u(),c(a(C),{key:1,title:"Error",type:"error"},{default:t(()=>[o(d(f.value),1)]),_:1})):m("v-if",!0),i.value?(u(),S(j,{key:2},[w("div",null,[e[5]||(e[5]=o("refresh_token: ")),l(a(T),{bordered:!1,type:"info"},{default:t(()=>[o(d(i.value.refresh_token),1)]),_:1})]),w("div",null,[e[6]||(e[6]=o("access_token: ")),l(a(T),{bordered:!1,type:"info"},{default:t(()=>[o(d(i.value.access_token),1)]),_:1})])],64)):m("v-if",!0)]),_:1}))}});export{J as _};
