import{ar as W,a3 as h,i as N,F as L,H as X,d as M,h as b,av as G,c as J,a2 as Q,ac as Y,r as Z,aq as ee,w as te,af as ne,aw as V,v as F,s as x,ad as re}from"./app-Bg6vI4SY.js";import{a as f,o as I,g as se}from"./browser-f_QODbLm.js";import{u as ie}from"./use-false-until-truthy-BSfhEUKS.js";let g=[];const K=new WeakMap;function oe(){g.forEach(e=>e(...K.get(e))),g=[]}function pe(e,...t){K.set(e,t),!g.includes(e)&&g.push(e)===1&&requestAnimationFrame(oe)}function me(){return W()!==null}const ye=typeof window<"u",xe=h("n-drawer-body"),be=h("n-modal-body"),Ie=h("n-modal-provider"),ge=h("n-modal"),ve=h("n-popover-body");function k(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);return r()}function S(e,t=!0,n=[]){return e.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&n.push(N(String(r)));return}if(Array.isArray(r)){S(r,t,n);return}if(r.type===L){if(r.children===null)return;Array.isArray(r.children)&&S(r.children,t,n)}else r.type!==X&&n.push(r)}}),n}function Ee(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);const s=S(r());if(s.length===1)return s[0];throw new Error(`[vueuc/${e}]: slot[${n}] should have exactly one child.`)}const c="@@coContext",$e={mounted(e,{value:t,modifiers:n}){e[c]={handler:void 0},typeof t=="function"&&(e[c].handler=t,I("clickoutside",e,t,{capture:n.capture}))},updated(e,{value:t,modifiers:n}){const r=e[c];typeof t=="function"?r.handler?r.handler!==t&&(f("clickoutside",e,r.handler,{capture:n.capture}),r.handler=t,I("clickoutside",e,t,{capture:n.capture})):(e[c].handler=t,I("clickoutside",e,t,{capture:n.capture})):r.handler&&(f("clickoutside",e,r.handler,{capture:n.capture}),r.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:n}=e[c];n&&f("clickoutside",e,n,{capture:t.capture}),e[c].handler=void 0}};function ae(e,t){console.error(`[vdirs/${e}]: ${t}`)}class ue{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,n){const{elementZIndex:r}=this;if(n!==void 0){t.style.zIndex=`${n}`,r.delete(t);return}const{nextZIndex:s}=this;r.has(t)&&r.get(t)+1===this.nextZIndex||(t.style.zIndex=`${s}`,r.set(t,s),this.nextZIndex=s+1,this.squashState())}unregister(t,n){const{elementZIndex:r}=this;r.has(t)?r.delete(t):n===void 0&&ae("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((n,r)=>n[1]-r[1]),this.nextZIndex=2e3,t.forEach(n=>{const r=n[0],s=this.nextZIndex++;`${s}`!==r.style.zIndex&&(r.style.zIndex=`${s}`)})}}const $=new ue,l="@@ziContext",Fe={mounted(e,t){const{value:n={}}=t,{zIndex:r,enabled:s}=n;e[l]={enabled:!!s,initialized:!1},s&&($.ensureZIndex(e,r),e[l].initialized=!0)},updated(e,t){const{value:n={}}=t,{zIndex:r,enabled:s}=n,a=e[l].enabled;s&&!a&&($.ensureZIndex(e,r),e[l].initialized=!0),e[l].enabled=!!s},unmounted(e,t){if(!e[l].initialized)return;const{value:n={}}=t,{zIndex:r}=n;$.unregister(e,r)}};function A(e){return typeof e=="string"?document.querySelector(e):e()}const Se=M({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:ie(Q(e,"show")),mergedTo:J(()=>{const{to:t}=e;return t??"body"})}},render(){return this.showTeleport?this.disabled?k("lazy-teleport",this.$slots):b(G,{disabled:this.disabled,to:this.mergedTo},k("lazy-teleport",this.$slots)):null}});function O(e){return e instanceof HTMLElement}function R(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(O(n)&&(D(n)||R(n)))return!0}return!1}function q(e){for(let t=e.childNodes.length-1;t>=0;t--){const n=e.childNodes[t];if(O(n)&&(D(n)||q(n)))return!0}return!1}function D(e){if(!ce(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function ce(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let d=[];const we=M({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=Y(),n=Z(null),r=Z(null);let s=!1,a=!1;const w=typeof document>"u"?null:document.activeElement;function p(){return d[d.length-1]===t}function v(i){var o;i.code==="Escape"&&p()&&((o=e.onEsc)===null||o===void 0||o.call(e,i))}ee(()=>{te(()=>e.active,i=>{i?(P(),I("keydown",document,v)):(f("keydown",document,v),s&&z())},{immediate:!0})}),ne(()=>{f("keydown",document,v),s&&z()});function T(i){if(!a&&p()){const o=E();if(o===null||o.contains(se(i)))return;u("first")}}function E(){const i=n.value;if(i===null)return null;let o=i;for(;o=o.nextSibling,!(o===null||o instanceof Element&&o.tagName==="DIV"););return o}function P(){var i;if(!e.disabled){if(d.push(t),e.autoFocus){const{initialFocusTo:o}=e;o===void 0?u("first"):(i=A(o))===null||i===void 0||i.focus({preventScroll:!0})}s=!0,document.addEventListener("focus",T,!0)}}function z(){var i;if(e.disabled||(document.removeEventListener("focus",T,!0),d=d.filter(m=>m!==t),p()))return;const{finalFocusTo:o}=e;o!==void 0?(i=A(o))===null||i===void 0||i.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&w instanceof HTMLElement&&(a=!0,w.focus({preventScroll:!0}),a=!1)}function u(i){if(p()&&e.active){const o=n.value,m=r.value;if(o!==null&&m!==null){const y=E();if(y==null||y===m){a=!0,o.focus({preventScroll:!0}),a=!1;return}a=!0;const _=i==="first"?R(y):q(y);a=!1,_||(a=!0,o.focus({preventScroll:!0}),a=!1)}}}function U(i){if(a)return;const o=E();o!==null&&(i.relatedTarget!==null&&o.contains(i.relatedTarget)?u("last"):u("first"))}function H(i){a||(i.relatedTarget!==null&&i.relatedTarget===n.value?u("last"):u("first"))}return{focusableStartRef:n,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:U,handleEndFocus:H}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:n}=this;return b(L,null,[b("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),e(),b("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}}),le=/^(\d|\.)+$/,B=/(\d|\.)+/;function Te(e,{c:t=1,offset:n=0,attachPx:r=!0}={}){if(typeof e=="number"){const s=(e+n)*t;return s===0?"0":`${s}px`}else if(typeof e=="string")if(le.test(e)){const s=(Number(e)+n)*t;return r?s===0?"0":`${s}px`:`${s}`}else{const s=B.exec(e);return s?e.replace(B,String((Number(s[0])+n)*t)):e}return e}function ze(e,t="default",n=void 0){const r=e[t];if(!r)return F("getFirstSlotVNode",`slot[${t}] is empty`),null;const s=V(r(n));return s.length===1?s[0]:(F("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function Ze(e,t,n){if(!t)return null;const r=V(t(n));return r.length===1?r[0]:(F("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}function ke(e,t=[],n){const r={};return t.forEach(s=>{r[s]=e[s]}),Object.assign(r,n)}const{cubicBezierEaseIn:C,cubicBezierEaseOut:j}=re;function Ae({transformOrigin:e="inherit",duration:t=".2s",enterScale:n=".9",originalTransform:r="",originalTransition:s=""}={}){return[x("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${t} ${C}, transform ${t} ${C} ${s&&`,${s}`}`}),x("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${t} ${j}, transform ${t} ${j} ${s&&`,${s}`}`}),x("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${n})`}),x("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(1)`})]}export{we as F,Se as L,Ae as a,ge as b,$e as c,xe as d,Ie as e,Te as f,Ze as g,me as h,ye as i,pe as j,ke as k,k as l,be as m,Ee as n,ze as o,ve as p,Fe as z};
